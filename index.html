<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Poetry Assistant</title>
  <style>
    :root {
  --bg-light: #f0f2f5;
  --bg-dark: #1e1e2f;
  --card-light: #ffffff;
  --card-dark: #2d2d3c;
  --text-light: #2c3e50;
  --text-dark: #ecf0f1;
  --button: linear-gradient(to right, #3498db, #2980b9);
  --hover: linear-gradient(to right, #2980b9, #2471a3);
  }

  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: var(--bg-light);
    color: var(--text-light);
    transition: background 0.3s, color 0.3s;
  }

  body.dark-mode {
    background: var(--bg-dark);
    color: var(--text-dark);
  }

  .container {
    max-width: 800px;
    margin: auto;
    padding: 2rem 1rem;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
  }

  h1 {
    font-size: 2.5rem;
    margin: 0;
  }

  .card {
    background: var(--card-light);
    border-radius: 15px;
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
    padding: 2rem;
    margin-bottom: 2rem;
    transition: transform 0.3s, background 0.3s;
  }

  body.dark-mode .card {
    background: var(--card-dark);
  }

  .card:hover {
    transform: scale(1.02);
  }

  h2 {
    font-size: 1.5rem;
    margin-top: 0;
  }

  input,
  textarea {
    width: 95%;
    padding: 1rem;
    font-size: 1rem;
    border: 2px solid #dcdde1;
    border-radius: 8px;
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    background-color: #fff;
    color: #2c3e50;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  input:focus,
  textarea:focus {
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
    outline: none;
  }


  button {
    background: var(--button);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
  }

  button:hover {
    background: var(--hover);
  }

  .output {
    margin-top: 1rem;
    background: #ecf0f1;
    padding: 1rem;
    border-radius: 8px;
    transition: background 0.3s;
  }

  body.dark-mode .output {
    background: #404060;
    color: white;
  }

  ul {
    padding-left: 1.5rem;
  }

  @media (max-width: 600px) {
    h1 {
      font-size: 2rem;
    }

    h2 {
      font-size: 1.25rem;
    }

    button {
      width: 100%;
    }

    input,
    textarea {
      font-size: 0.95rem;
      padding: 0.8rem;
      width: 90%;
    }

    .card {
      padding: 1.5rem 1rem;
    }

    .output {
      font-size: 0.95rem;
    }
  }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <header>
      <h1>Poetry Assistant</h1>
    </header>

    <section class="card">
        <h2 style="display: inline-flex; align-items: center; gap: 0.5rem;">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-music-icon lucide-music">
            <path d="M9 18V5l12-2v13"/>
            <circle cx="6" cy="18" r="3"/>
            <circle cx="18" cy="16" r="3"/>
        </svg>
        Rhyme
        </h2>
      <input id="rhymeInput" placeholder="Enter a word..." />
      <button onclick="findRhymes()">Find Rhymes</button>
      <div class="output" id="rhymeOutput"></div>
    </section>

    <section class="card">
      <h2 style="display: inline-flex; align-items: center; gap: 0.5rem;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-radius-icon lucide-radius"><path d="M20.34 17.52a10 10 0 1 0-2.82 2.82"/><circle cx="19" cy="19" r="2"/><path d="m13.41 13.41 4.18 4.18"/><circle cx="12" cy="12" r="2"/></svg> Metre</h2>
      <textarea id="metreInput" placeholder="Enter a poetic line..."></textarea>
      <button onclick="analyzeMetre()">Analyze Metre</button>
      <div class="output" id="metreOutput"></div>
    </section>

    <section class="card">
      <h2 style="display: inline-flex; align-items: center; gap: 0.5rem;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-ccw-icon lucide-rotate-ccw"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg> Alliteration</h2>
      <input id="alliterationSuggestInput" placeholder="Enter one word..." />
      <button onclick="suggestWords()">Alliteration </button>
      <div class="output" id="alliterationSuggestOutput"></div>
    </section>
  </div>

  <script>
    const vowels = 'aeiouy';
    let rhymeMap = new Map();

    document.addEventListener("DOMContentLoaded", () => {
      // Load word list from the link 'https://introcs.cs.princeton.edu/java/data/wordlist.txt'
      fetch('https://corsproxy.io/?https://introcs.cs.princeton.edu/java/data/wordlist.txt')
        .then(res => res.text())
        .then(data => {
          const wordList = data
            .split('\n')
            .map(w => w.trim().toLowerCase())
            .filter(Boolean);

          buildRhymeMap(wordList);
          window.wordList = wordList;
      });

    });

    // RHYME Implementation
    function buildRhymeMap(words, suffixLength = 2) {
      words.forEach(word => {
        const reversed = word.split('').reverse().join('');
        const suffix = reversed.substring(0, suffixLength);
        if (!rhymeMap.has(suffix)) rhymeMap.set(suffix, []);
        rhymeMap.get(suffix).push(word);
      });
    }

    function findRhymes() {
      const input = document.getElementById('rhymeInput').value.toLowerCase().trim();
      const output = document.getElementById('rhymeOutput');
      const parts = input.split(/\s+/);

      if (parts.length !== 1) {
        output.innerHTML = `<span style="color: red;"><b>Error:</b> Please enter only one word.</span>`;
        return;
      }

      const word = parts[0];
      const reversed = word.split('').reverse().join('');
      const suffix = reversed.substring(0, 2);
      const results = rhymeMap.get(suffix) || [];

      output.innerHTML = results.length
        ? `<b>Rhymes for "${word}":</b><ul>${results.filter(w => w !== word).slice(0, 20).map(w => `<li>${w}</li>`).join('')}</ul>`
        : `No rhymes found for "${word}".`;
    }

    // METRE Implementation
    function countSyllables(line) {
      let total = 0;
      const words = line.toLowerCase().split(/\s+/);
      words.forEach(word => {
        let syllables = 0;
        let prevVowel = false;
        for (let i = 0; i < word.length; i++) {
          const isVowel = vowels.includes(word[i]);
          if (isVowel && !prevVowel) {
            syllables++;
            prevVowel = true;
          } else if (!isVowel) {
            prevVowel = false;
          }
        }
        if (word.endsWith('e')) syllables = Math.max(syllables - 1, 1);
        total += syllables;
      });
      return total;
    }

    function analyzeMetre() {
      const line = document.getElementById('metreInput').value;
      const output = document.getElementById('metreOutput');
      const count = countSyllables(line);
      output.innerHTML = `Syllable count: <b>${count}</b>`;
    }

    // ALLITERATION SUGGESTION Implementation
    function suggestAlliterations(wordList, inputWord) {
      const firstChar = inputWord[0].toLowerCase();
      return wordList.filter(word => word.startsWith(firstChar) && word !== inputWord).slice(0, 20);
    }
      
    function suggestWords() {
      const input = document.getElementById("alliterationSuggestInput").value.toLowerCase().trim();
      const output = document.getElementById("alliterationSuggestOutput");

      if (!input || input.split(/\s+/).length !== 1) {
        output.innerHTML = `<span style="color: red;"><b>Error:</b> Please enter only one word.</span>`;
        return;
      }

      const suggestions = suggestAlliterations(window.wordList || [], input);

      output.innerHTML = suggestions.length
        ? `<b>Words starting with "${input[0].toUpperCase()}":</b><ul>${suggestions.map(w => `<li>${w}</li>`).join('')}</ul>`
        : `No suggestions found for "${input}".`;
    }

  </script>
</body>
</html>
